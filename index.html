<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button id="1" value="rock">Rock</button>
    <button id="2" value="paper">Paper</button>
    <button id="3" value="scissors">Scissors</button>
    <div id="container"> </div>


    <script> 
    const div = document.querySelector('#container');
    const h3 = document.createElement('h3');
    div.appendChild(h3);
    // make a list of the choices
    const choices =["rock", "paper", "scissors"];
    
    // pass it to the function
    function getComputerChoice(choices){
        // the function must choose a random string from the list and return it
        randomIndex = Math.floor(Math.random() * choices.length);
        return choices[randomIndex];
    }
    // singleRound take 2 parameters the computer choice and the user choice and display the result
    function singleRound(playerSelection, computerSelection){
        // let playerSelection = 
        // Rock beats scissors 
        if((playerSelection.toLowerCase() === "rock") & (computerSelection == "scissors")){
            h3.textContent = "You Win! Rock beats Scissors";
            return 1;
        }
        else if ((playerSelection.toLowerCase() === "scissors") & (computerSelection == "rock")){
            h3.textContent = "You Lose! Rock beats Scissors";
            return -1;
        }
        // scissors beat paper,
        else if((playerSelection.toLowerCase() === "scissors") & (computerSelection == "paper")){
            h3.textContent = "You Win! Scissors beat Paper";
            return 1;
        }
        else if ((playerSelection.toLowerCase() === "paper") & (computerSelection == "scissors")){
            h3.textContent = "You Lose! Scissors beat Paper";
            return -1;
         }
        // paper beats rock.
        else if((playerSelection.toLowerCase() === "paper") & (computerSelection == "rock")){
            h3.textContent = "You Win! Paper beats Rock";
            return 1;
        }
        else if((playerSelection.toLowerCase() === "rock") & (computerSelection == "paper")){
            h3.textContent = "You Lose! Paper beats Rock";
            return -1;
        }
        else if (playerSelection.toLowerCase() === computerSelection){
            h3.textContent = "It's a tie !";
            return 0;
        }
    }
    const h1 = document.createElement('h1');
    const h2 = document.createElement('h2');
    div.appendChild(h1);
    div.appendChild(h2);
    //function to keep track of scores until a player reach 5 points and display the winner!
    let scoreWins = 0;
    let scoreFails = 0;
    let scoreTies = 0;
    function game(playerSelectionInput){
            let playerSelection = playerSelectionInput;
            result = singleRound(playerSelection,getComputerChoice(choices) );
            if(scoreWins == 5 || scoreFails == 5){
                if(scoreWins == 5){
                    h1.textContent = "Final result: You win!";
                    scoreWins = 0;
                    scoreFails = 0;
                    scoreTies = 0;
                }
                else if(scoreFails == 5){
                    h1.textContent = "Final result: you lose!";
                    scoreWins = 0;
                    scoreFails = 0;
                    scoreTies = 0;
                }
                return 0;
            }
            //track the wins score
            if(result == 1)
            {
                scoreWins++;
            }
            //track the fails score
            if(result == -1){
                scoreFails++;
            }
            //track the ties score
            if(result == 0){
                scoreTies++;
            }
        // }
        h2.textContent = `scoreWins: ${scoreWins}, scoreFails ${scoreFails}, scoreTies ${scoreTies}`;
    }

    const btns = document.querySelectorAll('button');
    btns.forEach((item) => {
        
        item.addEventListener('click', () => {
                //start the game
                game(item.value);

        });
    }
    );
    </script>
</body>
</html>